# Mail to Calendar AI (Thunderbird Add-on)

Thunderbirdで受信したメールの内容をローカルAI（Ollama）で解析し、CalDAVカレンダー（ownCloud/Nextcloud等）へ予定をシームレスに登録するアドオン。
標準搭載機能（その他→変換→予定）は自動読み取り精度が不満。既存のアドオンは LLM非対応。日本語メールでは必要不可欠にもかかわらず、探してもみつからないので作成しました。


## 特徴

* **プライバシー重視**: ローカルで動作する Ollama を使用するため、メールの内容が外部（クラウドAI等）に送信される心配がありません。
* **カレンダー連携**: ownCloud や Nextcloud などの CalDAV サーバーへ直接予定を PUT します。
* **自動抽出**: LLM（デフォルトでは Qwen2.5 等を想定）がメール本文からタイトル、日時、場所、詳細を自動で抜き出します。曖昧表現に強く、プロンプト次第で日本語メール（前後文脈）に適応しやすい。

---

##  セットアップ

### 1. アドオンのインストール

1. 最新の `mail2cal.xpi` をダウンロード
2. Thunderbird の「アドオンとテーマ」画面を開き、歯車アイコンから「ファイルからアドオンをインストール」を選択
3. ダウンロードした `.xpi` を選択してインストール
4. (CalDAV/Ollamaサーバーに接続するために) 必要な権限を確認し追加

### 2. 設定

Thunderbird のアドオン設定画面（オプション）で以下を入力してください：

* **CalDAV認証情報 (OwnCloud)** ：CalDAV サーバーのユーザー名とパスワード
* **カレンダー一覧**: 保存先カレンダーのURLと表示名を JSON 形式で入力。
* **Ollama 情報**: API URL（例: `http://localhost:11434`）とモデル名（例: `qwen2.5:7b`）。
* **AIプロンプト**: {{date}}, {{subject}}などの変数はコード側で置換します


---

##  使い方

1. カレンダーに登録したいメールの本文エリアで右クリックします。
2. **「Mail to Calendar AI」** を選択します。
3. AI解析結果が表示されたポップアップが開きます。
4. 日時やタイトルを確認・修正し、登録先カレンダーを選択して「カレンダーに登録」をクリックします。
